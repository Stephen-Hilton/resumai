# Requirements Document

## Introduction

This document specifies the requirements for a job application automation system that streamlines the process of applying to multiple job postings. The system manages job postings through a multi-phase workflow, automatically generates customized resumes and cover letters using LLM technology, and provides a web-based UI for monitoring and managing the application pipeline. The system operates on a local-first, web-UI, event-driven architecture to handle parallel processing of multiple jobs efficiently.

## Glossary

- **Job_Folder**: A directory containing all files relevant to a single job posting, named using the convention `{phase}/{company}.{title}.{date}.{id}/`
- **Phase**: A stage in the job application workflow (Queued, Data_Generated, Docs_Generated, Applied, FollowUp, Interviewing, Negotiating, Accepted, Skipped, Expired, Errored)
- **Event**: An asynchronous operation that performs a specific task on a job folder, implemented as a Python module with `execute()` and `test()` functions
- **Event_Bus**: The framework that discovers, routes, and executes events based on string names
- **Subcontent_File**: A YAML file containing generated content for a specific resume section (summary, skills, highlights, experience, education, awards, coverletter), with some subcontent being generated by LLMs, other being generated by deterministic local functions
- **job.yaml**: A structured data file (`job.yaml`) containing job posting metadata that must conform to the template schema
- **resume.yaml**: A user-maintained YAML file containing the candidate's resume information
- **LLM_Generation**: The process of using a Large Language Model to create customized resume content based on job requirements
- **Static_Generation**: The process of using resume content from resume.yaml, either verbatim or modified by a deterministic local function, without LLM customization
- **Event_Context**: A data structure passed to all events, with input containing a "job_folder" pathlib.Path object, and output containing a tuple of "Success" boolean flag and a "job_folder" pathlib.Path object
- **job.log**: A log file for each job folder, containing a chronological list of events and their outcomes
- **event.data**: A file containing the most recent event data return, used for returning larger data sets than the event_context will allow; also used to resume processing after unexpected system restarts

## Requirements

### Requirement 1: Job Folder Management

**User Story:** As a job seeker, I want the system to organize all job-related files in structured folders, so that I can easily locate and manage materials for each application.

#### Acceptance Criteria

1. WHEN a new job is added, THE System SHALL create a Job_Folder in the `1_Queued` phase with the naming convention `{company}.{title}.{date}.{id}/`
2. THE System SHALL ensure all folder name components are sanitized by removing non-alphanumeric characters, except underscores (_), and 3 periods (.) for the delimiters in #1 above
3. WHEN a Job_Folder is created, THE System SHALL generate a unique job identifier if one is not provided
4. THE System SHALL validate that the Job_Folder name can be parsed back into its component parts (company, title, date, id) and that those component parts match the content of the job.yaml file
5. WHEN the Job_Folder components (company, title, date, id) are found to NOT match the content of the job.yaml file, THE System SHALL rename the job_folder to match the job.yaml file
6. WHEN a Job_Folder already exists at the target location, THE System SHALL return the existing path and return False success, indicating creation was not performed
7. THE System SHALL maintain the job.yaml file as the authoritative source for job metadata within each Job_Folder

### Requirement 2: Phase-Based Workflow

**User Story:** As a job seeker, I want jobs to progress through defined phases, so that I can track the status of each application from initial collection through final acceptance.

#### Acceptance Criteria

1. THE System SHALL support the following phases in order: `1_Queued`, `2_Data_Generated`, `3_Docs_Generated`, `4_Applied`, `5_FollowUp`, `6_Interviewing`, `7_Negotiating`, `8_Accepted`
2. THE System SHALL support special phases: `Skipped`, `Expired`, `Errored`
3. WHEN a job moves between phases, THE System SHALL physically relocate the Job_Folder to the appropriate phase directory
4. WHEN a job moves to a new phase, THE System SHALL preserve all existing files in the Job_Folder
5. WHEN a job moves to a new phase, THE System SHALL append a log entry to the job.log file documenting the phase transition
6. THE System SHALL allow jobs to move to any phase regardless of current phase (non-linear transitions permitted)
7. THE System SHALL allow for different events to be available depending on the phase

### Requirement 3: Event-Driven Architecture

**User Story:** As a developer, I want the system to use an event-driven architecture, so that operations can run asynchronously and in parallel for better performance.

#### Acceptance Criteria

1. THE Event_Bus SHALL discover all available events by scanning the `src/events/` directory for Python modules
2. WHEN an event is requested, THE Event_Bus SHALL dynamically import and execute the corresponding module's `execute()` function
3. WHEN test mode is enabled, THE Event_Bus SHALL call the module's `test()` function instead of `execute()`
4. THE System SHALL pass the Event_Context (pathlib.Path to the Job_Folder) to all event functions 
5. THE successful Event SHALL return a tuple of (True, job_folder_path) on success, with additional data context written to the event.data file (which can be removed after use)
6. WHEN an event raises an exception, THE Event_Bus SHALL catch it, log to application logs, and return a failed Event_Context
7. THE System SHALL support parallel execution of multiple events using asyncio
8. THE System SHALL allow events to invoke other events through the Event_Bus

### Requirement 4: Job Data Collection

**User Story:** As a job seeker, I want to collect job postings from multiple sources, so that I can build a queue of opportunities to apply to.

#### Acceptance Criteria

1. WHEN collecting from Gmail, THE System SHALL search for emails with subject "LinkedIn Job Alert" from the last 2 weeks
2. WHEN processing LinkedIn job alert emails, THE System SHALL extract company, title, date, id, and URL for each job listing
3. WHEN a job URL is provided, THE System SHALL fetch the HTML content and save it to `job.html` in the Job_Folder
4. WHEN fetching job details from a URL, THE System SHALL support domain-specific parsing for linkedin.com
5. THE System SHALL create or augment job.yaml with extracted job information, using `src/templates/job.yaml` as the template for creation and/or validation 
6. WHEN a job is manually entered, THE System SHALL accept job metadata directly without requiring job.html
7. THE System SHALL validate that job.yaml contains required fields: id, company, title, date, url
8. WHEN job.yaml validation fails, THE System SHALL return specific error messages indicating which fields are missing or invalid

### Requirement 5: LLM-Based Content Generation

**User Story:** As a job seeker, I want the system to generate customized resume content using AI, so that my application materials are tailored to each specific job posting.

#### Acceptance Criteria

1. WHEN generating LLM content, THE System SHALL read both job.yaml and resume.yaml (one or more sections as required) as input
2. THE System SHALL generate separate Subcontent_Files for: summary, skills, highlights, experience, education, awards, coverletter
3. WHEN generating each Subcontent_File, THE System SHALL use the event defined in the `subcontent_event` for the corresponding section
4. THE System SHALL save generated content to `subcontent.{section}.yaml` files in the Job_Folder
5. WHEN all Subcontent_Files are generated, THE System SHALL move the job to the `2_Data_Generated` phase
6. THE System SHALL support batch execution of all subcontent events in parallel
7. WHEN LLM generation fails, THE System SHALL retry 3 times, then log the error and move the job to the `Errored` phase
8. THE System SHALL enforce a 5 minute timeout of any LLM call
9. THE System SHALL allow users to configure the LLM provider and model through environment variables

### Requirement 6: Static Content Generation

**User Story:** As a job seeker, I want the option to use my standard resume content without AI customization, so that I can quickly apply to jobs that don't require tailored materials.

#### Acceptance Criteria

1. WHEN the user engages the "static content" override, THE System SHALL override all Subcontent event calls with the `gen_static_subcontent_*` version 
2. THE System SHALL save static content to `subcontent.{section}.yaml` files with the same format as LLM-generated files
3. WHEN the subcontent section doesn't exist verbatium, aka coverletter and hightlights, System SHALL create a static template `subcontent.{section}.yaml` file for the user to manually modify 
4. THE System SHALL allow users to choose between LLM generation and static generation on a per-job basis
5. THE System SHALL allow mixing of LLM-generated and static sections within a single job, loading and storing the preference in the job.yaml format (see `src/templates/job.yaml`)

### Requirement 7: Document Generation

**User Story:** As a job seeker, I want the system to combine generated content into final resume and cover letter documents, so that I have ready-to-submit application materials.

#### Acceptance Criteria

1. WHEN generating documents, THE System SHALL require all Subcontent_Files to exist in the Job_Folder (contacts, summary, skills, highlights, experience, education, awards, coverletter)
2. THE System SHALL combine all subcontent.*.yaml files (except coverletter) into a single resume.html file
3. THE System SHALL maintain each resume section separately in the HTML with distinct CSS classes for per-section styling
4. THE System SHALL generate a main.css file containing universal styles (colors, font sizes, font families) that apply to all sections
5. THE System SHALL generate per-section CSS files (contacts.css, summary.css, skills.css, highlights.css, experience.css, education.css, awards.css) for section-specific formatting
6. THE System SHALL allow customization of individual section formatting without disrupting other sections
7. THE System SHALL generate resume.pdf from resume.html using Playwright for high-fidelity rendering
8. THE System SHALL generate coverletter.html from subcontent.coverletter.yaml with the same CSS architecture (main.css and coverletter.css)
9. THE System SHALL generate coverletter.pdf from coverletter.html using Playwright
10. WHEN generating documents, THE System SHALL overwrite existing HTML and PDF files without warning
11. WHEN document generation completes successfully, THE System SHALL move the job to the `3_Docs_Generated` phase
12. THE System SHALL support batch generation of all documents in parallel

### Requirement 8: Logging and Monitoring

**User Story:** As a job seeker, I want comprehensive logging of all system activities, so that I can troubleshoot issues and track the history of each job application.

#### Acceptance Criteria

1. THE System SHALL maintain a job-specific log file (`job.log`) in each Job_Folder
2. WHEN any event executes on a job, THE System SHALL append an entry to job.log with format `{YYYY-MM-DD HH:MM:SS}.{job_folder_name} - {message}`
3. THE System SHALL maintain daily, high-level application logs in `src/logs/` named by date
4. WHEN an error occurs, THE System SHALL log to both the application log and the job.log
5. THE System SHALL include event name and error details in error log entries, as well as any recommended next steps
6. THE System SHALL roll over application logs daily
7. WHEN a job_folder moves to the `Errored` phase, THE System SHALL create an `error.md` file in that job_folder describing the error, context, the phase where it occurred, and any recommended next steps
8. The full job.log file should be available to view on the UI, by clicking on the job card.

### Requirement 9: User Notifications

**User Story:** As a job seeker, I want to receive real-time notifications about job processing activities in the UI, so that I can monitor progress without constantly checking the logs / terminal stdout.

#### Acceptance Criteria

1. WHEN an important event occurs, THE System SHALL send a toast notification to the web UI that lasts for at least 10 seconds
2. THE System SHALL include the job_folder name in all toast notifications
3. WHEN sending a notification, THE System SHALL also log the same message to job.log
4. THE System SHALL support notifications for: job creation, phase transitions, generation completion, and errors
5. THE System SHALL deliver notifications asynchronously without blocking event execution

### Requirement 10: Error Handling and Recovery

**User Story:** As a job seeker, I want the system to handle errors gracefully and provide recovery options, so that temporary failures don't permanently block my applications.

#### Acceptance Criteria

1. WHEN an event fails, THE System SHALL wait until all other events have finished, then sequentially retry the errored event
2. WHEN an event fails 3 times, THE System SHALL move the job to the `Errored` phase
3. WHEN a job enters the `Errored` phase, THE System SHALL create an error.md file with error details and the originating phase
4. THE System SHALL allow users to retry errored jobs, returning them to the phase prior to the error
5. WHEN retrying a job, THE System SHALL preserve the `error.md` file for reference
6. THE System SHALL catch and handle exceptions in all event handlers
7. WHEN an exception occurs, THE System SHALL return an EventResult with `success=False` and the job_folder where the user or next process can find details in the `error.md`

### Requirement 11: Job Lifecycle Management

**User Story:** As a job seeker, I want to manage the full lifecycle of job applications, so that I can track progress from initial posting through final outcome.

#### Acceptance Criteria

1. THE System SHALL allow users to manually move jobs to/from any phase with a "Move to..." combo box, however that does not guarantee that generation events will work when invoked (i.e., gen_resume_html may fail if no subcontent files are found)
2. WHEN a job in `1_Queued` is older than 45 days, THE System SHALL automatically move it to the `Expired` phase
3. WHEN moving to lifecycle phases (4-8, Skipped, Expired), THE System SHALL not modify any files except job.log
4. THE System SHALL append a log entry when jobs move to any lifecycle phase

### Requirement 12: Web-Based User Interface

**User Story:** As a job seeker, I want a web-based dashboard to view and manage all my job applications, so that I can interact with the system through an intuitive interface.

#### Acceptance Criteria

1. THE System SHALL provide a web UI accessible at http://127.0.0.1:5000
2. THE System SHALL display the application title "ResumAI Dohickey" with a rocket icon (üöÄ) and version number
3. THE System SHALL provide a "Resume to Use:" dropdown selector with a refresh button (üîÑ) to select which resume.yaml file to use
4. THE System SHALL provide three action buttons in the header: "Fetch Jobs from Email", "Add Job by URL", and "Manually Enter Job in Form"
5. THE System SHALL display a "Phases:" sidebar showing job counts for all phases: All Active, All Jobs, Queued, Data Generated, Docs Generated, Applied, Follow Up, Interviewing, Negotiating, Accepted, Errored, Expired, Skipped
6. THE System SHALL display phase counts as large numbers with phase names below
7. THE System SHALL allow clicking on phase names to filter the job cards displayed
8. THE System SHALL display a "Jobs in <phase name>" section showing filtered job cards based on selected phase
9. THE System SHALL provide a "Process All Jobs in Queue" button to batch process all queued jobs
10. THE System SHALL display an "App Logs:" panel on the right side showing real-time application logs
11. THE System SHALL update the App Logs panel every 1 second by reading from the current day's log file in src/logs/
12. THE System SHALL auto-scroll the App Logs panel to show the most recent entries
13. THE System SHALL display job cards in a grid layout with 2-3 cards per row depending on screen width
14. THE System SHALL provide a detailed view for each job showing all metadata and generated files (see Requirements 16-19 for job card specifications)
15. THE System SHALL allow users to trigger events (generate data, generate docs, move phases) from the UI through interactive elements (see Requirement 20)
16. THE System SHALL display toast notifications for real-time event updates
17. THE System SHALL provide a settings page for configuring resume selection and LLM preferences
18. THE System SHALL update the UI dynamically as events complete (see Requirement 21)

### Requirement 13: File Upload and Storage

**User Story:** As a job seeker, I want to upload generated documents to cloud storage, so that I can easily access and share my application materials.

#### Acceptance Criteria

1. WHEN uploading to S3, THE System SHALL read the S3_RESUME_BUCKET configuration from the .env file
2. THE System SHALL upload resume.pdf as `resume.{id}.pdf` to avoid name collisions
3. THE System SHALL upload coverletter.pdf as `coverletter.{id}.pdf` to avoid name collisions
4. WHEN upload completes successfully, THE System SHALL log the S3 URLs to job.log
5. WHEN upload fails, THE System SHALL log the error but not move the job to `Errored` phase

### Requirement 14: Data Validation and Schema Compliance

**User Story:** As a developer, I want strict validation of data files, so that the system operates reliably and errors are caught early.

#### Acceptance Criteria

1. THE System SHALL validate job.yaml against the JobModel schema using Pydantic
2. WHEN job.yaml validation fails, THE System SHALL return a list of specific field errors
3. THE System SHALL validate that resume.yaml is a dictionary containing a 'name' or 'identity.name' field
4. THE System SHALL validate that all required Subcontent_Files exist before generating documents
5. WHEN validation fails, THE System SHALL prevent the operation and return descriptive error messages
6. THE System SHALL use template files in `src/templates/` as schema references

### Requirement 15: Testing Infrastructure

**User Story:** As a developer, I want comprehensive testing capabilities, so that I can verify system functionality without affecting production data.

#### Acceptance Criteria

1. THE System SHALL provide a test mode flag in Event_Context
2. WHEN test mode is enabled, THE Event_Bus SHALL call `test()` functions instead of `execute()` functions
3. THE System SHALL implement non-destructive test functions for all events
4. THE System SHALL track test success and failure results
5. THE System SHALL provide unit tests for events, library functions, and UI components in the `tests/` directory
6. THE System SHALL support running tests without requiring external services (LLM, Gmail, S3)

### Requirement 16: Job Card UI Display

**User Story:** As a job seeker, I want to see job information displayed in cards with clear visual indicators, so that I can quickly understand the status of each application. 

#### Acceptance Criteria

1. THE System SHALL display each job as a card showing company name, job title, received date, location, salary, source, and tags
2. THE System SHALL display the current phase and a "Move to:" dropdown on each job card
3. THE System SHALL display a total file count for each job
4. THE System SHALL use the following icons for file status indicators: ‚úÖ (complete/exists), ‚ùå (missing), ‚ö†Ô∏è (error/warning), üîí (locked/unavailable)
5. THE System SHALL use the following icons for generation type indicators: ‚öôÔ∏è (static generation), üß† (LLM generation)
6. THE System SHALL use ‚ñ∂Ô∏è icon to indicate files that are ready to run or generate
7. WHEN a job is in the `Errored` phase, THE System SHALL display the ‚ö†Ô∏è icon next to Error.md only if the error file exists
8. THE System SHALL display file status for: job.yaml, job.log, Error.md, all subcontent files, resume.html, resume.pdf, coverletter.html, coverletter.pdf

### Requirement 17: Job Card UI - Queued Phase

**User Story:** As a job seeker, I want to configure generation options for queued jobs, so that I can choose between LLM and static content generation for each resume section.

#### Acceptance Criteria

1. WHEN a job is in the `1_Queued` phase, THE System SHALL display a "Subcontent State" section with all resume sections: Contacts, Summary, Skills, Highlights, Experience, Education, Awards, CoverLetter
2. THE System SHALL display two icons for each subcontent section: a file state icon and a generation type icon
3. THE System SHALL use ‚òëÔ∏è icon for subcontent files that have not been generated yet
4. THE System SHALL use ‚úÖ icon for subcontent files that exist and are complete
5. THE System SHALL display the generation type icon (‚öôÔ∏è for static, üß† for LLM) based on the `subcontent_events` configuration in job.yaml
6. WHEN a user clicks on a generation type icon, THE System SHALL toggle between static and LLM generation for that section
7. WHEN a generation type is toggled, THE System SHALL update the `subcontent_events` field in job.yaml
8. THE System SHALL display a "Generate Resume Data" button that triggers the `batch_gen_data` event
9. THE System SHALL display an "Or, skip this Job" button that triggers the `move_skipped` event
10. THE System SHALL display "Next Steps: Select Static or LLM Generation:" text above the subcontent section

### Requirement 18: Job Card UI - Data Generated Phase

**User Story:** As a job seeker, I want to see which subcontent files are ready and generate final documents, so that I can produce resume and cover letter PDFs.

#### Acceptance Criteria

1. WHEN a job is in the `2_Data_Generated` phase, THE System SHALL display the status of all subcontent files with ‚úÖ (exists) or ‚ùå (missing) icons
2. THE System SHALL display a "Next Steps: Generate Final Documents:" section
3. THE System SHALL display the status of resume.html, resume.pdf, coverletter.html, and coverletter.pdf files
4. THE System SHALL use ‚úÖ icon for HTML/PDF files that exist
5. THE System SHALL use üîí icon for PDF files when their corresponding HTML file does not exist
6. THE System SHALL display a "Generate All Resume Docs" button that triggers the `batch_gen_docs` event
7. THE System SHALL show that PDFs are dependent on HTML files being generated first
8. THE System SHALL display links to job.yaml editor, job.log viewer, and Error.md viewer (if error file exists)

### Requirement 19: Job Card UI - Docs Generated and Higher Phases

**User Story:** As a job seeker, I want to see all generated files for completed jobs, so that I can access my final application materials.

#### Acceptance Criteria

1. WHEN a job is in `3_Docs_Generated` phase or higher, THE System SHALL display all file statuses including subcontent files and final documents
2. THE System SHALL display ‚úÖ icon for files that exist and are complete
3. THE System SHALL display ‚ùå icon for files that are missing
4. THE System SHALL display ‚ö†Ô∏è icon next to Error.md only if the error file exists
5. THE System SHALL show the subcontent generation state for all sections
6. THE System SHALL display final document files: resume.html, resume.pdf, coverletter.html, coverletter.pdf with their status
7. THE System SHALL not display generation buttons for jobs in these phases
8. THE System SHALL allow viewing all files through clickable links

### Requirement 20: Interactive UI Elements

**User Story:** As a job seeker, I want to interact with job cards through clickable elements, so that I can view, edit, and manage job files easily.

#### Acceptance Criteria

1. WHEN a user clicks on the company name or job title, THE System SHALL navigate to the detailed job view/edit page
2. WHEN a user clicks on the "Source" field, THE System SHALL open the URL from job.yaml in a new browser tab
3. WHEN a user clicks on a subcontent section name, THE System SHALL open the corresponding `subcontent.{section}.yaml` file for viewing and editing
4. WHEN a user clicks on job.yaml, THE System SHALL open the job.yaml file in an editor
5. WHEN a user clicks on job.log, THE System SHALL open the job.log file in a viewer
6. WHEN a user clicks on Error.md, THE System SHALL open the error.md file in a viewer
7. WHEN a user clicks on any HTML or PDF filename, THE System SHALL open that file for viewing
8. WHEN a user clicks on a generation type icon (‚öôÔ∏è or üß†) in the Queued phase, THE System SHALL toggle the generation method for that section
9. WHEN a user selects a phase from the "Move to:" dropdown, THE System SHALL trigger the corresponding `move_{phase}` event
10. THE System SHALL provide visual feedback (hover effects, cursor changes) for all clickable elements

### Requirement 21: Dynamic UI Updates

**User Story:** As a job seeker, I want the UI to update in real-time as events complete, so that I can see progress without manually refreshing the page.

#### Acceptance Criteria

1. WHEN an event starts executing, THE System SHALL update the corresponding file status icon to indicate processing
2. WHEN an event completes successfully, THE System SHALL update the file status icon from ‚òëÔ∏è to ‚úÖ
3. WHEN an event fails, THE System SHALL update the file status icon to ‚ö†Ô∏è
4. WHEN a job moves to a new phase, THE System SHALL update the phase indicator and reload the job card with the appropriate phase-specific UI
5. WHEN subcontent files are generated, THE System SHALL update their status icons in real-time
6. WHEN HTML files are generated, THE System SHALL unlock the corresponding PDF generation (change üîí to ‚ñ∂Ô∏è)
7. WHEN the "Generate Resume Data" button is clicked, THE System SHALL update all subcontent file icons as they complete
8. WHEN the "Generate All Resume Docs" button is clicked, THE System SHALL update HTML and PDF file icons in sequence
9. THE System SHALL use WebSocket or polling to push real-time updates from the backend to the UI
10. THE System SHALL update the total file count dynamically as files are created or removed

### Requirement 22: File Generation Dependencies

**User Story:** As a developer, I want the system to enforce file generation dependencies, so that files are created in the correct order and errors are prevented.

#### Acceptance Criteria

1. THE System SHALL require all subcontent files (contacts, summary, skills, highlights, experience, education, awards, coverletter) to exist before generating resume.html
2. THE System SHALL require resume.html to exist before generating resume.pdf
3. THE System SHALL require coverletter.html to exist before generating coverletter.pdf
4. WHEN `batch_gen_docs` is triggered, THE System SHALL generate files in sequence: resume.html, coverletter.html, resume.pdf, coverletter.pdf
5. WHEN a dependency is not met, THE System SHALL display the üîí icon on the dependent file
6. WHEN a dependency is met, THE System SHALL change the icon from üîí to ‚ñ∂Ô∏è to indicate the file can be generated
7. WHEN attempting to generate a file without its dependencies, THE System SHALL return an error and log the missing dependencies
8. THE System SHALL validate all subcontent files exist before moving a job from `2_Data_Generated` to `3_Docs_Generated` phase

### Requirement 23: Real-Time Application Logs Display

**User Story:** As a job seeker, I want to see real-time application logs in the UI, so that I can monitor system activity and troubleshoot issues without checking log files manually.

#### Acceptance Criteria

1. THE System SHALL display an "App Logs:" panel on the right side of the main dashboard
2. THE System SHALL read the current day's application log file from `src/logs/{YYYYMMDD}.applog.txt` every 1 second
3. THE System SHALL read the application log without blocking new writes being written by events in flight
4. THE System SHALL display the most recent log entries in the App Logs panel
5. THE System SHALL auto-scroll the App Logs panel to show the newest entries at the bottom
6. THE System SHALL display log entries in monospace font for readability
7. THE System SHALL preserve log entry formatting including timestamps and message structure
8. THE System SHALL handle log file rotation gracefully, switching to the new day's log file at midnight
9. THE System SHALL display a maximum of 100 most recent log entries to prevent performance issues (tail 100 from *.applog.txt)
10. THE System SHALL allow users to scroll up to view older entries within the displayed range
11. THE System SHALL use a fixed-width panel that does not interfere with job card layout
11. THE System SHALL use a fixed-width font for logs, with very small font size (6pt) to keep the logs compact but readable

### Requirement 24: Header Action Buttons

**User Story:** As a job seeker, I want quick access to common actions from the header, so that I can efficiently add new jobs to the system.

#### Acceptance Criteria

1. THE System SHALL provide a "Fetch Jobs from Email" button that triggers the `get_gmail_linkedin` event
2. WHEN "Fetch Jobs from Email" is clicked, THE System SHALL connect to Gmail and retrieve LinkedIn job alert emails from the last 2 weeks
3. THE System SHALL provide an "Add Job by URL" button that opens a form to paste a job posting URL
4. WHEN a URL is submitted, THE System SHALL trigger the `get_url` event to fetch and parse the job posting
5. THE System SHALL provide a "Manually Enter Job in Form" button that opens a form for manual job entry
6. WHEN manual job data is submitted, THE System SHALL trigger the `create_jobfolder` event with the provided data
7. THE System SHALL display toast notifications for the results of each action (success or error)
8. THE System SHALL update the job counts and job card display after new jobs are added
9. THE System SHALL validate form inputs before triggering events

### Requirement 25: Resume Selection

**User Story:** As a job seeker, I want to select which resume to use for job applications, so that I can maintain multiple resume versions for different job types.

#### Acceptance Criteria

1. THE System SHALL display a "Resume to Use:" dropdown in the header
2. THE System SHALL populate the dropdown with all .yaml files found in the `resumes/` directory
3. THE System SHALL display the currently selected resume name in the dropdown
4. THE System SHALL provide a refresh button (üîÑ) next to the dropdown to reload the list of available resumes
5. WHEN a user selects a different resume, THE System SHALL update the `default_resume` configuration
6. WHEN a user clicks the refresh button, THE System SHALL rescan the `resumes/` directory and update the dropdown
7. THE System SHALL persist the selected resume choice across browser sessions
8. THE System SHALL use the selected resume for all content generation operations

### Requirement 26: Phase Filtering and Navigation

**User Story:** As a job seeker, I want to filter jobs by phase, so that I can focus on jobs at specific stages of the application process.

#### Acceptance Criteria

1. THE System SHALL display a "Phases:" sidebar with all phase names and job counts
2. THE System SHALL calculate and display counts for: All Active, All Jobs, Queued, Data Generated, Docs Generated, Applied, Follow Up, Interviewing, Negotiating, Accepted, Errored, Expired, Skipped
3. THE System SHALL define "All Active" as jobs in phases 1-8 (excluding Errored, Expired, Skipped)
4. THE System SHALL define "All Jobs" as the total count across all phases
5. WHEN a user clicks on a phase name, THE System SHALL filter the job cards to show only jobs in that phase
6. WHEN a phase is selected, THE System SHALL update the "Jobs in <phase name>" header to reflect the current filter
7. THE System SHALL highlight the currently selected phase in the sidebar
8. THE System SHALL default to showing "All Active" jobs when the page loads
9. THE System SHALL update phase counts dynamically as jobs move between phases

### Requirement 27: Batch Processing

**User Story:** As a job seeker, I want to process all queued jobs at once, so that I can efficiently generate content for multiple applications.

#### Acceptance Criteria

1. THE System SHALL provide a "Process All Jobs in Queue" button above the job cards section
2. WHEN the button is clicked, THE System SHALL trigger `batch_gen_data` for all jobs in the `1_Queued` phase or `batch_gen_docs` for all jobs in the `2_Data_Generated` phase
3. THE System SHALL process jobs in serial, soas not to hit concurrency limits 
4. THE System SHALL update job card status icons in real-time as each job completes
5. THE System SHALL display toast notifications for each job that completes or fails
6. THE System SHALL update phase counts as jobs move from Queued to Data Generated
7. WHEN all jobs complete, THE System SHALL display a summary notification with success/failure counts
8. THE System SHALL allow cancellation of batch processing if needed
9. THE System SHALL handle errors gracefully, moving failed jobs to Errored phase without stopping other jobs
