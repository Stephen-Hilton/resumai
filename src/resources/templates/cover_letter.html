<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
/* Calibri font family - system default */
/* Material Icons for contact icons */
@import url('https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200');

/* Shared styles for both resume and cover letter */
.both_body {
  font-family: Calibri, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  color: #111;
  margin: 0;
  padding: 15px;
  background: #f7f7f8;
  font-size: 10.5pt;
}

.both_container {
  max-width: 800px;
  margin: 10px auto;
  background: #fff;
  padding: 20px 30px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.06);
}

.both_header {
  border-bottom: 1px solid #e6e6e6;
  padding-bottom: 12px;
  margin-bottom: 18px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  min-height: 70px;
}

.both_header_left {
  flex: 3;
  display: flex;
  align-items: center;
  justify-content: center;
  border-right: 1px solid #e6e6e6;
  padding-right: 15px;
  align-self: stretch;
}

.both_header_right {
  flex: 1;
  text-align: right;
  padding-left: 15px;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  align-self: stretch;
}

.both_h1 {
  margin: 0;
  font-size: 32pt;
  font-family: Calibri, sans-serif;
  font-weight: bold;
  color: #1e3a8a;
  letter-spacing: 0.2px;
  text-align: center;
  width: 100%;
}

.both_meta {
  font-size: 8pt;
  color: #444;
  line-height: 1.1;
}

/* Contact labels within meta section should match the container size */
.both_meta .both_muted {
  font-size: 8pt;
  color: #444;
  font-family: Calibri, sans-serif;
  font-weight: normal;
}

.both_meta_line {
  margin-bottom: 1px;
  display: flex;
  align-items: center;
  gap: 4px;
}

/* Contact icon styling */
.both_contact_icon {
  width: 12px;
  height: 12px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

/* Material Icons styling */
.both_contact_icon .material-symbols-outlined {
  font-size: 12px;
  color: #666;
  font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 20;
}

/* Direct image icon styling */
.both_contact_icon img {
  width: 12px;
  height: 12px;
  object-fit: contain;
}

.both_section {
  margin-top: 15px;
}

.both_muted {
  color: #666;
  font-size: 10.5pt;
  font-family: Calibri, sans-serif;
  font-weight: normal;
  line-height: 1.5;
}

/* Professional Summary paragraph styling */
.both_section p {
  font-size: 10.5pt;
  font-family: Calibri, sans-serif;
  color: #222;
  line-height: 1.5;
  margin: 8px 0;
}

.both_footer {
  margin-top: 18px;
  border-top: 1px solid #e6e6e6;
  padding-top: 12px;
  font-size: 10.5pt;
  font-family: Calibri, sans-serif;
  color: #555;
}

.both_link {
  color: #0366d6;
  text-decoration: none;
  font-size: 8pt;
  font-family: Calibri, sans-serif;
}

.both_bold {
  font-weight: 600;
  color: #111;
}

/* Cover letter-specific styles */
.cover_p {
  color: #222;
  line-height: 1.5;
  margin: 12px 0;
  font-size: 10.5pt;
  font-family: Calibri, sans-serif;
}

.cover_ul {
  margin: 8px 0 12px 18px;
  padding: 0;
  color: #222;
}

.cover_li {
  margin-bottom: 4px;
  font-size: 10.5pt;
  font-family: Calibri, sans-serif;
}

.cover_sig {
  margin-top: 14px;
  font-weight: 600;
  font-size: 10.5pt;
  font-family: Calibri, sans-serif;
}

.cover_subject {
  font-weight: bold;
  font-size: 10.5pt;
  font-family: Calibri, sans-serif;
}

.cover_strengths_intro {
  color: #666;
  font-size: 10.5pt;
  font-family: Calibri, sans-serif;
}

/* Responsive design for both */
@media (max-width: 520px) {
  .both_container {
    padding: 18px;
  }
  
  .both_h1 {
    font-size: 32pt;
  }
  
  .both_header {
    flex-direction: column;
  }
  
  .both_header_right {
    text-align: left;
    padding-left: 0;
    margin-top: 10px;
  }
}

/* Print styles - remove container styling for clean PDF output */
@media print {
  .both_body {
    background: white !important;
    padding: 0 !important;
    margin: 0 !important;
  }
  
  .both_container {
    max-width: none !important;
    margin: 0 !important;
    padding: 0 !important;
    box-shadow: none !important;
    background: white !important;
  }
  
  .both_header_left {
    border-right: none !important;
    padding-right: 10px !important;
  }
  
  /* Optimize fonts for print */
  .both_h1 {
    color: #1e3a8a !important;
  }
  
  /* Hide any screen-only elements if needed */
  .screen-only {
    display: none !important;
  }
  
  /* Ensure links are visible in print */
  .both_link {
    color: #0366d6 !important;
    text-decoration: underline;
  }
}
    </style>
    <title>{{ name }} Cover Letter</title>
</head>

<body class="both_body">
  <div class="both_container">
    
    <!-- HEADER SECTION: Two-column layout with name on left, contact info on right -->
    <header class="both_header">
      <div class="both_header_left">
        <!-- Large, prominent name display -->
        <h1 class="both_h1">{{ name }}</h1>
      </div><!--
      --><div class="both_header_right">
        <!-- Contact information - icons only, no text labels -->
        <div class="both_meta">
          {% for contact in contacts %}
          <div class="both_meta_line">
            <span class="both_contact_icon">
              {% if contact.icon.endswith('.svg') %}
                <img src="/resumes/icons/{{ contact.icon }}" alt="{{ contact.name }}" style="width: 12px; height: 12px;" />
              {% else %}
                <span class="material-symbols-outlined">{{ contact.icon }}</span>
              {% endif %}
            </span>
            {% if contact.name in ['email', 'phone'] %}
              <a class="both_link" href="{{ 'mailto:' if contact.name == 'email' else 'tel:' }}{{ contact.label }}">{{ contact.label }}</a>
            {% elif contact.url %}
              <a class="both_link" href="{{ contact.url }}">{{ contact.label }}</a>
            {% else %}
              <span>{{ contact.label }}</span>
            {% endif %}
          </div>
          {% endfor %}
        </div>
      </div>
    </header>

    <!-- COVER LETTER CONTENT -->
    <section class="both_section" style="margin-top: 15px;">
      
      <!-- Two newlines before date -->
      <br><br>
      
      <!-- Date -->
      <div style="margin-bottom: 15px;">
        <p>{{ date }}</p>
      </div>

      <!-- Letter Body -->
      <div class="cover_letter_body" style="line-height: 1.5;">
        
        <!-- One newline before Dear -->
        <br>
        
        <!-- Opening (Dear company name) -->
        <p style="margin-bottom: 15px;">{{ opening }}</p>
        
        <!-- One newline after Dear -->
        <br>
        
        <!-- Body Paragraphs -->
        {% for paragraph in body_paragraphs %}
          {% if loop.last %}
            <!-- One newline before last sentence -->
            <br>
            <p style="margin-bottom: 15px;">{{ paragraph }}</p>
          {% else %}
            <p style="margin-bottom: 15px;">{{ paragraph }}</p>
          {% endif %}
        {% endfor %}
        
        <!-- One newline before thank you/closing -->
        <br>
        
        <!-- Closing with newline before last sentence -->
        {% set closing_clean = closing|replace('\\n', ' ')|replace('  ', ' ') %}
        {% if 'Thank you' in closing_clean %}
          {% if '. Thank you' in closing_clean %}
            {% set parts = closing_clean.split('. Thank you') %}
            <p style="margin-top: 15px;">{{ parts[0] }}.</p>
            <br>
            <p style="margin-top: 0px;">Thank you{{ parts[1] }}</p>
          {% elif '.Thank you' in closing_clean %}
            {% set parts = closing_clean.split('.Thank you') %}
            <p style="margin-top: 15px;">{{ parts[0] }}.</p>
            <br>
            <p style="margin-top: 0px;">Thank you{{ parts[1] }}</p>
          {% else %}
            <!-- Split at any sentence boundary before "Thank you" -->
            {% set sentences = closing_clean.split('. ') %}
            {% set before_parts = [] %}
            {% set after_parts = [] %}
            {% set found_thank_you = false %}
            {% for sentence in sentences %}
              {% if 'Thank you' in sentence and not found_thank_you %}
                {% set found_thank_you = true %}
                {% set after_parts = after_parts + [sentence] %}
              {% elif found_thank_you %}
                {% set after_parts = after_parts + [sentence] %}
              {% else %}
                {% set before_parts = before_parts + [sentence] %}
              {% endif %}
            {% endfor %}
            
            {% if found_thank_you and before_parts %}
              <p style="margin-top: 15px;">{{ before_parts|join('. ') }}.</p>
              <br>
              <p style="margin-top: 0px;">{{ after_parts|join('. ') }}</p>
            {% else %}
              <!-- Simple fallback: split at "Thank you" -->
              {% set parts = closing_clean.split('Thank you') %}
              {% if parts|length > 1 %}
                <p style="margin-top: 15px;">{{ parts[0] }}</p>
                <br>
                <p style="margin-top: 0px;">Thank you{{ parts[1] }}</p>
              {% else %}
                <p style="margin-top: 15px;">{{ closing|replace('\\n', '<br>')|safe }}</p>
              {% endif %}
            {% endif %}
          {% endif %}
        {% else %}
          <!-- No "Thank you" found, use original -->
          <p style="margin-top: 15px;">{{ closing|replace('\\n', '<br>')|safe }}</p>
        {% endif %}
        
      </div>
    </section>

  </div>

  <!-- VERSION FOOTER -->
  <footer style="text-align: center; margin-top: 40px; font-size: 6pt; color: #666;">
    <a href="https://github.com/Stephen-Hilton/resumai" target="_blank" style="color: inherit; text-decoration: none;">ResumeAI v{{ version }}</a>
  </footer>

</body>
</html>