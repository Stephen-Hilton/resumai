<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResumAI Dohickey üöÄ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ ResumAI Dohickey</h1>
            <p class="version">v0.1.0</p>
        </header>

        <main>
            <section class="controls">
                <div class="resume-selector">
                    <label for="resume-select">Resume:</label>
                    <select id="resume-select">
                        <option value="">Loading...</option>
                    </select>
                    <button id="refresh-resumes" title="Refresh resume list">üîÑ</button>
                    <button id="edit-resume" class="btn-resume-action" title="Edit selected resume">‚úèÔ∏è Edit</button>
                    <button id="add-resume" class="btn-resume-action" title="Add new resume">‚ûï New</button>
                </div>

                <div class="action-buttons">
                    <button id="fetch-jobs" class="btn-primary">üìß Fetch Jobs from Email</button>
                    <button id="add-url" class="btn-secondary">üîó Add Job by URL</button>
                    <button id="manual-entry" class="btn-secondary">‚úèÔ∏è Manually Enter Job</button>
                    <button id="batch-process" class="btn-batch">‚ö° Process All Jobs in Queue</button>
                    <button id="view-logs" class="btn-logs">üìã View Logs</button>
                </div>
            </section>

            <div class="content-wrapper">
                <aside class="sidebar">
                    <h2>Phases</h2>
                    <ul id="phase-list">
                        <li data-phase="1_Queued" class="active">Queued <span class="count">0</span></li>
                        <li data-phase="2_Data_Generated">Data Generated <span class="count">0</span></li>
                        <li data-phase="3_Docs_Generated">Docs Generated <span class="count">0</span></li>
                        <li data-phase="4_Applied">Applied <span class="count">0</span></li>
                        <li data-phase="5_FollowUp">Follow Up <span class="count">0</span></li>
                        <li data-phase="6_Interviewing">Interviewing <span class="count">0</span></li>
                        <li data-phase="7_Negotiating">Negotiating <span class="count">0</span></li>
                        <li data-phase="8_Accepted">Accepted <span class="count">0</span></li>
                        <li data-phase="Skipped">Skipped <span class="count">0</span></li>
                        <li data-phase="Expired">Expired <span class="count">0</span></li>
                        <li data-phase="Errored">Errored <span class="count">0</span></li>
                        <li data-phase="all-active">All Active <span class="count">0</span></li>
                        <li data-phase="all-jobs">All Jobs <span class="count">0</span></li>
                    </ul>
                </aside>

                <section class="main-content">
                    <h2 id="phase-header">Jobs in Queued</h2>
                    <div id="jobs-grid" class="jobs-grid">
                        <p class="loading">Loading jobs...</p>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <div id="toast-container"></div>

    <!-- File Viewer Modal -->
    <div id="file-viewer-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-filename">File Viewer</h2>
                <button id="modal-close" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <textarea id="file-content" class="file-editor"></textarea>
            </div>
            <div class="modal-footer">
                <button id="modal-save" class="btn-primary">üíæ Save</button>
                <button id="modal-cancel" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Job Editor Modal -->
    <div id="job-editor-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="job-modal-title">Edit Job Details</h2>
                <button id="job-modal-close" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="job-editor-form" class="job-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="job-company">Company *</label>
                            <input type="text" id="job-company" required>
                        </div>
                        <div class="form-group">
                            <label for="job-title">Title *</label>
                            <input type="text" id="job-title" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="job-id">Job ID *</label>
                            <input type="text" id="job-id" required>
                        </div>
                        <div class="form-group">
                            <label for="job-date">Date *</label>
                            <input type="text" id="job-date" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="job-url">URL *</label>
                        <input type="url" id="job-url" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="job-location">Location</label>
                            <input type="text" id="job-location">
                        </div>
                        <div class="form-group">
                            <label for="job-salary">Salary</label>
                            <input type="text" id="job-salary">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="job-source">Source</label>
                        <input type="text" id="job-source">
                    </div>
                    
                    <div class="form-group">
                        <label for="job-tags">Tags (comma-separated)</label>
                        <input type="text" id="job-tags" placeholder="e.g., Fast growing, Remote, Startup">
                    </div>
                    
                    <div class="form-group">
                        <label for="job-description">Description</label>
                        <textarea id="job-description" rows="6"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="job-modal-save" class="btn-primary">üíæ Save Changes</button>
                <button id="job-modal-cancel" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Logs Modal -->
    <div id="logs-modal" class="modal">
        <div class="modal-content modal-logs">
            <div class="modal-header">
                <h2>Application Logs</h2>
                <div class="modal-header-actions">
                    <button id="copy-logs" class="btn-copy" title="Copy logs to clipboard">üìã Copy</button>
                    <button id="logs-modal-close" class="modal-close">&times;</button>
                </div>
            </div>
            <div class="modal-body">
                <div id="logs-content" class="logs-content"></div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
