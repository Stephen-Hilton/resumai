{% extends "base.html" %}
{% block content %}
<div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
  <h1 style="margin:0;">Jobs</h1>

  <!-- Option B: Global importer (does NOT require clicking into a job) -->
  <form method="post" action="/import/gmail/linkedin" style="margin:0;">
    <button type="submit">Import LinkedIn Jobs from Gmail</button>
  </form>
</div>

<p class="muted" style="margin-top:6px;">
  This will read your LinkedIn job-alert emails and create folders under <code>jobs/1_Queued</code>.
</p>

<div class="kanban" style="display:flex; gap:12px; overflow-x:auto; padding-top:10px;">
  {% for ph in phases %}
    <div class="col" style="min-width:280px; border:1px solid #ddd; border-radius:10px; padding:10px;">
      <h2 style="margin:0 0 8px 0; font-size:16px;">{{ ph.phase }}</h2>

      {% if ph.jobs and ph.jobs|length > 0 %}
        <ul style="list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px;">
          {% for job in ph.jobs %}
            <li style="border:1px solid #eee; border-radius:10px; padding:8px;">
              <div style="font-weight:600;">{{ job.name }}</div>
              <div class="muted" style="font-size:12px; margin-top:2px;">{{ ph.phase }}</div>
              <!-- If you later want click-through, turn this into a link:
                   href="{{ url_for('job_detail', phase=ph.phase, job_folder=job.name) }}" -->
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="muted" style="font-size:13px;">No jobs in this phase.</div>
      {% endif %}
    </div>
  {% endfor %}
</div>
{% endblock %}
