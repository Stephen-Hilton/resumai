<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>{{ resume.get('name','Resume') }}</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0.65in; }
    h1,h2 { margin: 0; }
    .muted { opacity: 0.75; }
    .section { margin-top: 14px; }
    ul { margin: 6px 0 0 18px; padding: 0; }
    li { margin-bottom: 4px; }
    .role { margin-top: 10px; }
  </style>
</head>
<body>
  <h1>{{ resume.get('name','') }}</h1>
  <div class="muted">{{ resume.get('title','') }} • {{ resume.get('location','') }} • {{ resume.get('email','') }}</div>

  <div class="section">
    <h2>Professional Summary</h2>
    {% if sub.summary and sub.summary.get('content') %}
      <p>{{ sub.summary.get('content') }}</p>
    {% else %}
      <p>{{ resume.get('Summary') or resume.get('summary') or '' }}</p>
    {% endif %}
  </div>

  <div class="section">
    <h2>Core Skills</h2>
    {% set skills_list = (sub.skills.get('content') if sub.skills else None) %}
    {% if not skills_list %}
      {% set skills_list = resume.get('skills',[]) %}
    {% endif %}
    <ul>
      {% for item in skills_list %}
        <li>{{ item }}</li>
      {% endfor %}
    </ul>
  </div>

  <div class="section">
    <h2>Selected Achievements</h2>
    {% if sub.highlights and sub.highlights.get('content') %}
      <ul>
        {% for it in sub.highlights.get('content') %}
          <li>{{ it.get('text') }}</li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="muted">No highlights generated.</p>
    {% endif %}
  </div>

  <div class="section">
    <h2>Experience</h2>
    {% if sub.experience and sub.experience.get('content') %}
      {% for role in sub.experience.get('content') %}
        <div class="role">
          <div class="muted">Role {{ role.get('role_id') }}</div>
          <ul>
            {% for b in role.get('bullets',[]) %}
              <li>{{ b.get('text') }}</li>
            {% endfor %}
          </ul>
        </div>
      {% endfor %}
    {% else %}
      <p class="muted">No experience content.</p>
    {% endif %}
  </div>

  <div class="section">
    <h2>Education</h2>
    {% set ed = sub.education.get('content') if sub.education else resume.get('education',[]) %}
    <ul>
      {% for e in ed %}
        <li>{{ e }}</li>
      {% endfor %}
    </ul>
  </div>

  <div class="section">
    <h2>Awards & Keynotes</h2>
    {% set aw = sub.awards.get('content') if sub.awards else resume.get('awards_and_keynotes',[]) %}
    <ul>
      {% for a in aw %}
        <li>{{ a }}</li>
      {% endfor %}
    </ul>
  </div>
</body>
</html>
